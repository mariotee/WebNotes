(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,t,n){e.exports={main:"style_main__DToDI",header:"style_header__1zib9",body:"style_body__3PdrF",postbutton:"style_postbutton__37eAy",footer:"style_footer__1ubEb"}},2:function(e,t,n){e.exports={root:"style_root__1C2X8",loginbuttons:"style_loginbuttons__3XBzF",label:"style_label__3MMYW",showpass:"style_showpass__2Hya8",input:"style_input__1AAqb",checkbox:"style_checkbox__3jzPL"}},25:function(e,t,n){e.exports=n(58)},31:function(e,t,n){},58:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(23),s=n.n(o),c=(n(31),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function i(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&navigator.serviceWorker.controller}}}).catch(function(e){})}var u=n(1),l=n.n(u),m=n(3),p=n(8),d=n(9),f=n(12),h=n(10),b=n(13),g=n(11),w=n(2),E=n.n(w),v=function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={passwordVisible:!1,name:"",passwordEntered:""},n.togglePasswordVisibility=function(){n.setState({passwordVisible:!n.state.passwordVisible})},n.onChange=function(e){n.setState(Object(g.a)({},e.target.name,e.target.value))},n}return Object(b.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:E.a.root},r.a.createElement("div",{className:E.a.header},r.a.createElement("h2",null,"Web Notes"),r.a.createElement("span",{style:{display:this.props.loading?"block":"none"}},"hang on a moment. signing you in...")),r.a.createElement("div",null,r.a.createElement("label",{className:E.a.label},"User"),r.a.createElement("input",{className:E.a.input,name:"name",value:this.state.name,onChange:function(t){return e.onChange(t)}}),r.a.createElement("br",null),r.a.createElement("label",{className:E.a.label},"Password"),r.a.createElement("input",{className:E.a.input,name:"passwordEntered",value:this.state.passwordEntered,type:this.state.passwordVisible?"text":"password",onChange:function(t){return e.onChange(t)},onKeyPress:function(t){"Enter"===t.key&&e.props.onSubmit({username:e.state.name,password:e.state.passwordEntered})}}),r.a.createElement("br",null),r.a.createElement("input",{className:E.a.checkbox,type:"checkbox",onClick:function(){return e.togglePasswordVisibility()}}),r.a.createElement("span",{className:E.a.showpass},"Show Password"),r.a.createElement("br",null),r.a.createElement("button",{className:E.a.loginbuttons,color:"second",onClick:function(){return e.props.onSubmit({username:e.state.name,password:e.state.passwordEntered})}},"Sign In"),r.a.createElement("br",null),r.a.createElement("button",{className:E.a.loginbuttons,color:"third",onClick:function(){return e.props.onSubmit({username:"GUEST"})}},"Enter As Universal Guest"),r.a.createElement("br",null),r.a.createElement("button",{className:E.a.loginbuttons,color:"fourth",onClick:this.props.createAccount},"Create Account"),r.a.createElement("div",{style:{backgroundColor:"#f9c9",display:this.props.creating?"block":"none",padding:"8px"}},r.a.createElement("label",{className:E.a.label},"Username"),r.a.createElement("input",{className:E.a.input,name:"newUsername",onChange:function(t){return e.onChange(t)}}),r.a.createElement("br",null),r.a.createElement("label",{className:E.a.label},"Email"),r.a.createElement("input",{className:E.a.input,placeholder:"(optional)",name:"newEmail",onChange:function(t){return e.onChange(t)}}),r.a.createElement("br",null),r.a.createElement("label",{className:E.a.label},"Password"),r.a.createElement("input",{className:E.a.input,name:"newPassword",onChange:function(t){return e.onChange(t)},onKeyPress:function(t){"Enter"===t.key&&e.props.onPost({username:e.state.newUsername,email:e.state.newEmail,password:e.state.newPassword})}}),r.a.createElement("button",{color:"second",className:E.a.loginbuttons,onClick:function(){return e.props.onPost({username:e.state.newUsername,email:e.state.newEmail,password:e.state.newPassword})}},"Submit"))))}}]),t}(r.a.Component),y=n(24),_=n(14),N=n.n(_),k=n(5),x=n.n(k),S="https://ju48kiggo7.execute-api.us-east-2.amazonaws.com/api",C=function(){var e=Object(m.a)(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.post(S,{controller:"ENTRY",sub:{method:"GET",byFilter:{}}});case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(m.a)(l.a.mark(function e(t){var n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.post(S,{controller:"ENTRY",sub:{method:"POST",post:t}});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(m.a)(l.a.mark(function e(t){var n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.post(S,{controller:"ENTRY",sub:{method:"DELETE",id:t}});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),P=n(6),U=n.n(P);var A=function(e){return r.a.createElement("div",{className:U.a.root},r.a.createElement("div",{className:U.a.head},r.a.createElement("label",{className:U.a.inputlabel},r.a.createElement("b",null,"Note")),r.a.createElement("button",{color:"third",className:U.a.postbutton,onClick:function(){return e.onKey({key:"Enter"})}},"Post Note")),r.a.createElement("textarea",{className:U.a.input,name:"post",placeholder:"hit ENTER to submit",value:e.newNote.post,rows:2,maxLength:140,onKeyPress:function(t){e.onKey(t)},onChange:function(t){e.onChange(t)}}),r.a.createElement("div",{className:U.a.charcount},"".concat(e.newNote.post.length,"/140")))},T=n(7),D=n.n(T);var I=function(e){var t=function(e){return String(e).length<2?"0"+e:e};return r.a.createElement("div",{className:D.a.root},r.a.createElement("div",{className:D.a.body},r.a.createElement("div",{className:D.a.timestamp},function(e){e=new Date(e);var n=t(e.getMonth()+1),a=t(e.getDate()),r=e.getFullYear(),o=e.getHours(),s=t(e.getMinutes()),c="AM";return o>=12&&(c="PM"),o>12&&(o-=12),0===o&&(o=12),o<10&&(o="0".concat(o)),"".concat(n,"/").concat(a,"/").concat(r," ").concat(o,":").concat(s," ").concat(c)}(e.data.timestamp)),r.a.createElement("div",{className:D.a.post},e.data.post),r.a.createElement("div",{className:D.a.footer},r.a.createElement("span",{className:D.a.username},e.data.user),r.a.createElement("button",{color:"fourth",onClick:function(){return e.onDelete(e.data._id)}},"Delete"))))},R=function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={characterCount:0,newNote:{post:""}},n.onFieldChange=function(e){var t=n.state.newNote;n.setState({newNote:Object(y.a)({},t,Object(g.a)({},e.target.name,e.target.value))})},n.onEditTableRow=function(e){},n.onConfirmEdit=function(e){},n.onDeleteNote=function(){var e=Object(m.a)(l.a.mark(function e(t){var a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure you want to delete this note?")){e.next=5;break}return e.next=3,O(t);case 3:(a=e.sent)&&!a.errorMessage&&n.props.removeNoteFromState(a);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.postKeyPress=function(){var e=Object(m.a)(l.a.mark(function e(t){var a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("Enter"!==t.key){e.next=6;break}return e.next=3,j({user:n.props.user,timestamp:new Date,post:n.state.newNote.post});case 3:(a=e.sent)&&!a.errorMessage&&n.props.addNoteToState(a),n.setState({newNote:{post:""}});case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n}return Object(b.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=(this.props||[]).data;return r.a.createElement("div",{className:N.a.root},r.a.createElement("div",{className:N.a.main},r.a.createElement("div",{className:N.a.header},"Web Notes"),r.a.createElement("div",{className:N.a.body},t.length>0&&t.map(function(t,n){return r.a.createElement(I,{key:"note_"+n,data:t,onDelete:e.onDeleteNote})}),r.a.createElement(A,{newNote:this.state.newNote,onChange:this.onFieldChange,onKey:this.postKeyPress}))),r.a.createElement("div",{className:N.a.footer},r.a.createElement("button",{color:"first",onClick:this.props.logout},"Logout")))}}]),t}(r.a.Component),W=function(){var e=Object(m.a)(l.a.mark(function e(t){var n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.post(S,{controller:"USER",sub:{method:"GET",get:t}});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(m.a)(l.a.mark(function e(t){var n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.post(S,{controller:"USER",sub:{method:"POST",post:t}});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),L=function(e){e.sort(function(e,t){return e.timestamp>t.timestamp?-1:1})},M=function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={loggedIn:!1,loadingUser:!1,creatingAccount:!1,loginError:!1,postError:!1,notes:[],user:"anonymous"},n.toggleCreate=function(){n.setState({creatingAccount:!n.state.creatingAccount})},n.submitCreate=function(){var e=Object(m.a)(l.a.mark(function e(t){var a,r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({loadingUser:!0}),e.next=3,F(t);case 3:if(!(a=e.sent)||a.errorMessage){e.next=12;break}return e.next=7,C();case 7:r=e.sent,L(r),n.setState({notes:r,loggedIn:!0,loadingUser:!1,creatingAccount:!1,loginError:!1,postError:!1}),e.next=13;break;case 12:n.setState({loggedIn:!1,loadingUser:!1,creatingAccount:!1,postError:!0});case 13:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.submitLogin=function(){var e=Object(m.a)(l.a.mark(function e(t){var a,r,o;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.state.loggedIn){e.next=22;break}if("GUEST"!==t.username){e.next=9;break}return e.next=4,C();case 4:a=e.sent,L(a),n.setState({notes:a,loggedIn:!0,loadingUser:!1,user:"anonymous"}),e.next=22;break;case 9:return n.setState({loadingUser:!0}),e.next=12,W(t);case 12:if(!(r=e.sent)){e.next=21;break}return e.next=16,C();case 16:o=e.sent,L(o),n.setState({notes:o,loadingUser:!1,loggedIn:!0,user:r.username}),e.next=22;break;case 21:n.setState({loginError:!0});case 22:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.onLogout=function(){n.setState({loggedIn:!1})},n.addNoteToState=function(e){n.setState(function(t){var n=t.notes;return n.push(e),L(n),{notes:n}})},n.removeNoteFromState=function(e){n.setState(function(t){var n=t.notes;return Date.now()-new Date(e.timestamp).getTime()<3e4?{notes:n=t.notes.filter(function(t){return t._id!==e._id})}:{notes:n=n.map(function(t){return t._id===e._id?(t.user="deleted",t):t})}})},n}return Object(b.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return this.state.loginError&&(window.alert("error logging in."),this.setState({loadingUser:!1,loginError:!1})),this.state.postError&&(window.alert("error creating user."),this.setState({creatingAccount:!1,postError:!1})),this.state.loggedIn?r.a.createElement(R,{user:this.state.user,data:this.state.notes,addNoteToState:this.addNoteToState,removeNoteFromState:this.removeNoteFromState,logout:this.onLogout}):r.a.createElement(v,{onSubmit:this.submitLogin,onPost:this.submitCreate,createAccount:this.toggleCreate,creating:this.state.creatingAccount,loading:this.state.loadingUser})}}]),t}(r.a.Component);s.a.render(r.a.createElement(M,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/WebNotes",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/WebNotes","/service-worker.js");c?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):i(e)}).catch(function(){})}(e),navigator.serviceWorker.ready.then(function(){})):i(e)})}}()},6:function(e,t,n){e.exports={root:"style_root__3hnWl",head:"style_head__3RdfS",input:"style_input__R0zRl",inputlabel:"style_inputlabel__3RQSj",priority:"style_priority__XJdxv",select:"style_select__3l2Bv",charcount:"style_charcount__3PqTH"}},7:function(e,t,n){e.exports={root:"style_root__vkU_u",body:"style_body__3-3dH",timestamp:"style_timestamp__10c7u",post:"style_post__10IpF",footer:"style_footer__2W3Xv",username:"style_username__isv88"}}},[[25,2,1]]]);
//# sourceMappingURL=main.57ccce73.chunk.js.map