(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{184:function(e,t,n){e.exports=n(320)},189:function(e,t,n){},318:function(e,t,n){},320:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(31),s=n.n(o),i=(n(189),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function c(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}var u=n(2),l=n.n(u),d=n(7),m=n(24),p=n(25),h=n(28),f=n(26),g=n(29),b=n(27),w=n(3),v=n(88),E=n.n(v),y=n(89),k=n.n(y),x=n(18),N=n(20),C={primary:{main:"#f9c",hover:"#d7a"},second:{main:"#9cf",hover:"#7ad"},third:{main:"#9fc",hover:"#7da"},fourth:{main:"#fc9",hover:"#da7"}},S={width:"70%",margin:"4px",borderRadius:"16px"},j={_keys:{palette:C,borderRadius:"24px",maxWidth:"720px"},secondButton:Object(N.a)({},S,{backgroundColor:"".concat(C.second.main),"&:hover":{backgroundColor:"".concat(C.second.hover)}}),thirdButton:Object(N.a)({},S,{backgroundColor:"".concat(C.third.main),"&:hover":{backgroundColor:"".concat(C.third.hover)}}),fourthButton:Object(N.a)({},S,{backgroundColor:"".concat(C.fourth.main),"&:hover":{backgroundColor:"".concat(C.fourth.hover)}}),checkbox:{color:"inherit"}},O=Object(N.a)({},j,{root:{width:"95%",maxWidth:j._keys.maxWidth,margin:"14px auto",backgroundColor:j._keys.palette.primary.main,borderRadius:j._keys.borderRadius,textAlign:"center"},label:{margin:"0 16px",color:"#000"},input:{width:"60%",maxWidth:"200px"}}),A=function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={passwordVisible:!1,name:"",passwordEntered:""},n.togglePasswordVisibility=function(){n.setState({passwordVisible:!n.state.passwordVisible})},n.onChange=function(e){n.setState(Object(b.a)({},e.target.name,e.target.value))},n}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement(w.b,{className:t.root},r.a.createElement(w.d,{title:"Web Notes",subheader:r.a.createElement("span",{style:{display:this.props.loading?"block":"none"}},"hang on a moment. signing you in...")}),r.a.createElement(w.c,null,r.a.createElement(w.f,{className:t.label},"User"),r.a.createElement(w.e,{className:t.input,name:"name",value:this.state.name,onChange:function(t){return e.onChange(t)}}),r.a.createElement("br",null),r.a.createElement(w.f,{className:t.label},"Password"),r.a.createElement(w.e,{className:t.input,name:"passwordEntered",value:this.state.passwordEntered,type:this.state.passwordVisible?"text":"password",onChange:function(t){return e.onChange(t)},onKeyPress:function(t){"Enter"===t.key&&e.props.onSubmit({username:e.state.name,password:e.state.passwordEntered})},endAdornment:this.state.passwordVisible?r.a.createElement("img",{width:24,height:24,alt:"show/hide password",src:k.a,onClick:this.togglePasswordVisibility}):r.a.createElement("img",{width:24,height:24,alt:"show/hide password",src:E.a,onClick:this.togglePasswordVisibility})}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(w.a,{className:t.secondButton,variant:"contained",onClick:function(){return e.props.onSubmit({username:e.state.name,password:e.state.passwordEntered})}},"Sign In"),r.a.createElement("br",null),r.a.createElement(w.a,{className:t.thirdButton,variant:"contained",onClick:function(){return e.props.onSubmit({username:"anonymous"})}},"Enter As Anonymous"),r.a.createElement("br",null),r.a.createElement(w.a,{className:t.fourthButton,variant:"contained",onClick:this.props.createAccount},"Create Account"),r.a.createElement("div",{style:{backgroundColor:"#f9c9",display:this.props.creating?"block":"none",padding:"8px"}},r.a.createElement(w.f,{className:t.label},"Username"),r.a.createElement(w.e,{name:"newUsername",onChange:function(t){return e.onChange(t)}}),r.a.createElement("br",null),r.a.createElement(w.f,{className:t.label},"Email"),r.a.createElement(w.e,{placeholder:"(optional)",name:"newEmail",onChange:function(t){return e.onChange(t)}}),r.a.createElement("br",null),r.a.createElement(w.f,{className:t.label},"Password"),r.a.createElement(w.e,{name:"newPassword",onChange:function(t){return e.onChange(t)},onKeyPress:function(t){"Enter"===t.key&&e.props.onPost({username:e.state.newUsername,email:e.state.newEmail,password:e.state.newPassword})}}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(w.a,{variant:"contained",className:t.secondButton,onClick:function(){return e.props.onPost({username:e.state.newUsername,email:e.state.newEmail,password:e.state.newPassword})}},"Submit"))))}}]),t}(r.a.Component),P=Object(x.withStyles)(O)(A),T=Object(N.a)({},j,{root:{textAlign:"center"},main:{margin:"16px auto",width:"95%",maxWidth:j._keys.maxWidth,borderRadius:j._keys.borderRadius,overflow:"hidden"},header:{backgroundColor:j._keys.palette.primary.main,padding:"16px 0",textAlign:"center"},body:{backgroundColor:j._keys.palette.second.main},bottom:{padding:"8px 0",backgroundColor:j._keys.palette.third.main},footer:{maxWidth:j._keys.maxWidth,margin:"0 auto"}}),U=n(19),W=n.n(U),R="https://ju48kiggo7.execute-api.us-east-2.amazonaws.com/dev",_=function(){var e=Object(d.a)(l.a.mark(function e(t){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.a.post(R,{controller:"ENTRY",sub:{method:"POST",post:t}});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(d.a)(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.a.post(R,{controller:"ENTRY",sub:{method:"GET"}});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(d.a)(l.a.mark(function e(t){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.a.post(R,{controller:"ENTRY",sub:{method:"DELETE",id:String(t)}});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),I=n(37);n(318);var M=function(e){var t=Object(I.a)({},e);return r.a.createElement("div",{className:"cp-root"},r.a.createElement("div",{className:"cp-header"},r.a.createElement("label",{className:"cp-input-label"},r.a.createElement("b",null,"Create New Post")),r.a.createElement("button",{className:"cp-post-btn",onClick:function(){return t.onKey({key:"Enter"})}},">")),r.a.createElement("textarea",{className:"cp-input",name:"post",placeholder:'click the send button or hit the ENTER key to post. keep in mind what is written as a post can only be removed within 30 seconds of posting it.after that, the username is just set to "deleted" for that post',value:t.newNote.post,rows:2,maxLength:140,onKeyPress:function(e){return t.onKey(e)},onChange:function(e){return t.onChange(e)}}),r.a.createElement("div",{className:"cp-charcount"},"".concat(t.newNote.post.length,"/140")))};var L=Object(x.withStyles)(function(e){return{root:{margin:"8px 0",padding:"4px",backgroundColor:"#9fc",borderRadius:"16px",textAlign:"left"},body:{padding:"8px 12px",backgroundColor:"#fff9",color:"#333",borderRadius:"16px"},timestamp:{color:"#666",fontSize:"0.7em"},post:{margin:"8px",color:"#d7a"},footer:{display:"flex",justifyContent:"space-between",fontSize:"0.8em"},userBadge:{color:"#9999",margin:"auto 0"},button:{backgroundColor:"#fc66",textTransform:"none","&:hover":{backgroundColor:"#fc69",color:"#f9c"}}}})(function(e){var t=Object(I.a)({},e),n=t.classes,a=function(e){return String(e).length<2?"0"+e:e};return r.a.createElement("div",{className:n.root},r.a.createElement("div",{className:n.body},r.a.createElement("div",{className:n.timestamp},function(e){e=new Date(e);var t=a(e.getMonth()+1),n=a(e.getDate()),r=e.getFullYear(),o=e.getHours(),s="AM";o>=12&&(s="PM"),o>12&&(o-=12),0===o&&(o=12),o=a(o);var i=a(e.getMinutes());return"".concat(t,"/").concat(n,"/").concat(r," ").concat(o,":").concat(i," ").concat(s)}(t.data.timestamp)),r.a.createElement("div",{className:n.post},t.data.post),r.a.createElement("div",{className:n.footer},r.a.createElement("div",{className:n.userBadge},t.data.user),r.a.createElement(w.a,{className:n.button,size:"small",onClick:function(){return t.onDelete(t.data._id)}},"Delete"))))}),K=function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={characterCount:0,newNote:{post:""}},n.onFieldChange=function(e){var t=n.state.newNote;n.setState({newNote:Object(N.a)({},t,Object(b.a)({},e.target.name,e.target.value))})},n.onEditTableRow=function(e){},n.onConfirmEdit=function(e){},n.onDeleteNote=function(){var e=Object(d.a)(l.a.mark(function e(t){var a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure you want to delete this note?")){e.next=5;break}return e.next=3,D(t);case 3:(a=e.sent)&&!a.errorMessage&&n.props.removeNoteFromState(a);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.postKeyPress=function(){var e=Object(d.a)(l.a.mark(function e(t){var a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("Enter"!==t.key){e.next=6;break}return e.next=3,_({user:window.localStorage.getItem(n.props.user),timestamp:new Date,post:n.state.newNote.post});case 3:(a=e.sent)&&!a.errorMessage&&n.props.addNoteToState(a),n.setState({newNote:{post:""}});case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement("div",{className:t.root},r.a.createElement(w.b,{className:t.main},r.a.createElement(w.d,{className:t.header,title:"Web Notes"}),r.a.createElement(w.c,{className:t.body},this.props.data.map(function(t,n){return r.a.createElement(L,{key:n,data:t,onDelete:e.onDeleteNote})}),r.a.createElement(M,{newNote:this.state.newNote,onChange:this.onFieldChange,onKey:this.postKeyPress}))),r.a.createElement("div",{className:t.footer},r.a.createElement(w.a,{className:t.thirdButton,variant:"contained",onClick:this.props.logout},"Logout")))}}]),t}(r.a.Component),V=Object(x.withStyles)(T)(K),F=function(){var e=Object(d.a)(l.a.mark(function e(t){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.a.post(R,{controller:"USER",sub:{method:"GET",get:t}});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=Object(d.a)(l.a.mark(function e(t){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.a.post(R,{controller:"USER",sub:{method:"POST",post:t}});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),z=function(){return Math.floor(Number(9e5*Math.random()+1e6))},Y=function(e){var t=function(e){var t=z(),n=String(e+=t).split("");for(var a in n){var r=n[a].charCodeAt(0);r=(r+t)%50+50,n[a]=String.fromCharCode(r),t=z()}return n.join("")}(e);return window.localStorage.setItem(t,e),t},G=function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={userHash:"",loggedIn:!1,loadingUser:!1,creatingAccount:!1,loginError:!1,postError:!1,notes:[]},n.sortNotes=function(e){return e.sort(function(e,t){return e.timestamp>t.timestamp?-1:1})},n.toggleCreate=function(){n.setState({creatingAccount:!n.state.creatingAccount})},n.allowEntry=function(){var e=Object(d.a)(l.a.mark(function e(t){var a,r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=Y(t),e.next=3,B();case 3:if(e.t0=e.sent,e.t0){e.next=6;break}e.t0=[];case 6:r=e.t0,n.setState({notes:r,userHash:a,loggedIn:!0,loadingUser:!1,creatingAccount:!1,loginError:!1,postError:!1});case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.submitUserCreate=function(){var e=Object(d.a)(l.a.mark(function e(t){var a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({loadingUser:!0}),e.next=3,H(t);case 3:(a=e.sent)&&!a.errorMessage?n.allowEntry(a.username):n.setState({loggedIn:!1,loadingUser:!1,creatingAccount:!1,postError:!0});case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.submitLogin=function(){var e=Object(d.a)(l.a.mark(function e(t){var a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.state.loggedIn){e.next=11;break}if("anonymous"!==t.username){e.next=5;break}n.allowEntry(t.username),e.next=11;break;case 5:return n.setState({loadingUser:!0}),e.next=8,F(t);case 8:(a=e.sent)?n.allowEntry(a.username):n.setState({loginError:!0});case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.onLogout=function(){window.localStorage.removeItem(n.state.userHash),n.setState({userHash:"",loggedIn:!1})},n.addNoteToState=function(e){var t=n.state.notes;t.push(e),n.setState({notes:t})},n.removeNoteFromState=function(e){var t=new Date,a=new Date(e.timestamp);if(t.getTime()-a.getTime()>3e4){var r=n.state.notes.map(function(t){return t._id===e._id&&(t.user="deleted"),t});n.setState({notes:r})}else{var o=n.state.notes.filter(function(t){return t._id!==e._id});n.setState({notes:o})}},n}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){!function(){for(var e in window.localStorage)delete window.localStorage[e]}()}},{key:"render",value:function(){return this.state.loginError&&(window.alert("error logging in."),this.setState({loadingUser:!1,loginError:!1})),this.state.postError&&(window.alert("error creating user."),this.setState({creatingAccount:!1,postError:!1})),this.state.loggedIn?r.a.createElement(V,{user:this.state.userHash,data:this.sortNotes(this.state.notes),addNoteToState:this.addNoteToState,removeNoteFromState:this.removeNoteFromState,logout:this.onLogout}):r.a.createElement(P,{onSubmit:this.submitLogin,onPost:this.submitUserCreate,createAccount:this.toggleCreate,creating:this.state.creatingAccount,loading:this.state.loadingUser})}}]),t}(r.a.Component);s.a.render(r.a.createElement(G,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/WebNotes",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/WebNotes","/service-worker.js");i?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):c(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):c(e)})}}()},88:function(e,t,n){e.exports=n.p+"static/media/eye.35347e34.svg"},89:function(e,t,n){e.exports=n.p+"static/media/eyeslash.e1717ce7.svg"}},[[184,2,1]]]);